<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Theo D√µi V·ª• Vi·ªác & Tr·ª£ L√Ω AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Inter', sans-serif; }
      /* Style cho b·∫£ng b√°o l·ªói */
      #debug-overlay {
        display: none; 
        position: fixed; 
        bottom: 0; 
        left: 0; 
        right: 0; 
        height: 200px;
        background: #fff5f5; 
        border-top: 4px solid #ef4444; 
        overflow-y: auto; 
        padding: 16px; 
        z-index: 99999;
        font-family: monospace; 
        font-size: 13px; 
        color: #b91c1c;
        box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
      }
      #debug-overlay h3 { margin-top: 0; font-weight: bold; font-size: 1.1em; }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.554.0",
    "react-markdown": "https://aistudiocdn.com/react-markdown@^10.1.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
<!-- Script an to√†n: Gi·∫£ l·∫≠p m√¥i tr∆∞·ªùng v√† b·∫Øt l·ªói to√†n c·ª•c -->
<script>
  // 1. Gi·∫£ l·∫≠p process.env ƒë·ªÉ tr√°nh l·ªói "process is not defined" tr√™n tr√¨nh duy·ªát
  window.process = window.process || { env: { API_KEY: '' } };

  // 2. H√†m b·∫Øt l·ªói to√†n c·ª•c (Global Error Handler)
  window.onerror = function(message, source, lineno, colno, error) {
    var overlay = document.getElementById('debug-overlay');
    if (overlay) {
      overlay.style.display = 'block';
      var time = new Date().toLocaleTimeString();
      var errorMsg = '<div><strong>[' + time + '] L·ªói Nghi√™m Tr·ªçng:</strong> ' + message + '</div>';
      errorMsg += '<div style="color:#666; margin-left:10px; font-size:0.9em;">T·∫°i: ' + source + ':' + lineno + '</div>';
      if (error && error.stack) {
        errorMsg += '<pre style="background:#fff; padding:5px; border:1px solid #ecc; margin-top:5px; white-space:pre-wrap;">' + error.stack + '</pre>';
      }
      errorMsg += '<hr style="border-color:#fca5a5; margin:10px 0;"/>';
      overlay.innerHTML += errorMsg;
    }
    console.error("Global Error Caught:", message, error);
  };
</script>
</head>
  <body class="bg-slate-50 text-slate-900">
    <div id="root"></div>
    
    <!-- Khu v·ª±c hi·ªÉn th·ªã l·ªói -->
    <div id="debug-overlay">
        <h3>üîß B·∫£ng Th√¥ng B√°o L·ªói (Debug Log)</h3>
        <p>N·∫øu b·∫°n th·∫•y b·∫£ng n√†y, ·ª©ng d·ª•ng ƒëang g·∫∑p s·ª± c·ªë. H√£y ch·ª•p ·∫£nh m√†n h√¨nh ho·∫∑c copy l·ªói b√™n d∆∞·ªõi ƒë·ªÉ s·ª≠a.</p>
        <hr style="border-color:#fca5a5; margin:10px 0;"/>
    </div>
    
    <script type="module" src="./index.tsx"></script>
    
    <!-- Script ki·ªÉm tra xem ·ª©ng d·ª•ng c√≥ ch·∫°y kh√¥ng -->
    <script>
      setTimeout(function() {
        var root = document.getElementById('root');
        // N·∫øu sau 3 gi√¢y m√† th·∫ª root v·∫´n tr·ªëng, t·ª©c l√† React ch∆∞a ch·∫°y
        if (!root || root.childElementCount === 0) {
           var overlay = document.getElementById('debug-overlay');
           if (overlay) {
               overlay.style.display = 'block';
               overlay.innerHTML += '<div style="font-weight:bold; color:red; margin-top:10px;">‚ö†Ô∏è C·∫¢NH B√ÅO: M√ÄN H√åNH TR·∫ÆNG</div>' + 
               '<div>·ª®ng d·ª•ng kh√¥ng kh·ªüi ƒë·ªông ƒë∆∞·ª£c sau 3 gi√¢y. Nguy√™n nh√¢n c√≥ th·ªÉ l√†:</div>' + 
               '<ul style="list-style-type:disc; margin-left:20px;">' +
               '<li>Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ch·∫°y tr·ª±c ti·∫øp file .tsx (C·∫ßn d√πng c√¥ng c·ª• Build nh∆∞ Vite).</li>' +
               '<li>L·ªói k·∫øt n·ªëi m·∫°ng kh√¥ng t·∫£i ƒë∆∞·ª£c th∆∞ vi·ªán React.</li>' +
               '<li>L·ªói c√∫ ph√°p trong file c·∫•u h√¨nh.</li>' +
               '</ul>';
           }
        }
      }, 3000);
    </script>
  </body>
</html>
